\chapter{排版样式设定}\label{chap:styles}

\begin{intro}
至此你已经基本学会排版内容丰富的文档，标题、目录、章节、公式、列表、图片、表格等等应有尽有。但是你可能已经有点不甘心了，
因为似乎你排版出来的文档是千篇一律的模样——\LaTeX\ 默认的字体、单调的页眉页脚、不太令你满意的页边距，等等。
本章的内容将带你一览如何修改 \LaTeX\ 的排版样式。
\end{intro}

\section{字体和字号}\label{sec:font}

\LaTeX{} 根据文档的逻辑结构（章节、脚注等）来选择合适的字体样式以及字号。
在某些情况下，你可能会想要在文档中选用不一样的字体样式和字号。
你可以使用表 \ref{tbl:fonts} 和表 \ref{tbl:sizes} 中列出的命令以达到修改字体的目的。
\begin{example}
{\small The small and
\textbf{bold} Romans ruled}
{\Large all of great big
{\itshape Italy}.}
\end{example}

\LaTeXe 的一个重要特征是：字体的各种属性是相互独立的，这意味着你可以改变字体的大小，而仍然保留字体原有的粗体或者斜体的特性。

\subsection{字体样式}\label{subsec:fontshape}
\index{font}\index{font size} 

\LaTeX\ 提供了两组修改字体的命令，见表 \ref{tbl:fonts}。其中诸如 \cmd{bfseries} 形式的命令将会影响之后所有的字符，
如果想要让它在局部生效，需要用花括号建立\textbf{分组}，也就是写成 \marg*{\cmd{bfseries}\ \Arg{some text}} 这样的形式；
对应的 \cmd{textbf} 形式带一个参数，它只会改变参数内部的字体，相比之下更为常用。

在公式中，直接使用 \cmd{textbf} 等命令不会起效，甚至报错。\LaTeX\ 已有修改数学字体的命令，详见 \ref{subsec:math-alpha} 小节。

\begin{table}[!tbp]
\caption{字体命令。} \label{tbl:fonts}
\centering
\begin{tabular}{@{}rr@{\quad}l@{}}
\hline
\fni{rmfamily} & \fni{textrm}\marg*{\ldots}   & \textrm{\wi{roman}}      \\
\fni{sffamily} & \fni{textsf}\marg*{\ldots}   & \textsf{\wi{sans serif}} \\
\fni{ttfamily} & \fni{texttt}\marg*{\ldots}   & \texttt{\wi{typewriter}} \\[\medskipamount]
\fni{mdseries} & \fni{textmd}\marg*{\ldots}   & \textrm{medium}          \\
\fni{bfseries} & \fni{textbf}\marg*{\ldots}   & \textbf{\wi{bold face}}  \\[\medskipamount]
\fni{upshape}  & \fni{textup}\marg*{\ldots}   & \textup{\wi{upright}}    \\
\fni{itshape}  & \fni{textit}\marg*{\ldots}   & \textit{\wi{italic}}     \\
\fni{slshape}  & \fni{textsl}\marg*{\ldots}   & \textsl{\wi{slanted}}    \\
\fni{scshape}  & \fni{textsc}\marg*{\ldots}   & \textsc{\wi{Small Caps}} \\[\medskipamount]
\fni{em}       & \ci{emph}\marg*{\ldots}      & \emph{\wi{emphasized}}   \\
\fni{normalfont}  & \fni{textnormal}\marg*{\ldots}   & \textnormal{\wi{normal font}} \\
\hline
\end{tabular}
\end{table}

\subsection{字号}\label{subsec:fontsize}

字号命令实际大小依赖于所使用的文档类及其选项。表 \ref{tbl:ptsizes} 列出了这些命令在标准文档类中的绝对大小，单位为 pt。

\begin{table}[!tbp]
\centering
\caption{字号。} \label{tbl:sizes}
\begin{tabular}{@{}ll}
\hline
\fni{tiny}      & \tiny        tiny font \\
\fni{scriptsize}   & \scriptsize  very small font\\
\fni{footnotesize} & \footnotesize  quite small font \\
\fni{small}        &  \small            small font \\
\fni{normalsize}   &  \normalsize  normal font \\
\fni{large}        &  \large       large font \\
\hline
\end{tabular}%
\qquad\begin{tabular}{ll@{}}
\hline
\fni{Large}        &  \Large       larger font \\[5pt]
\fni{LARGE}        &  \LARGE       very large font \\[5pt]
\fni{huge}         &  \huge        huge \\[5pt]
\fni{Huge}         &  \Huge        largest \\
\hline
\end{tabular}
\end{table}

\begin{table}[!tbp]
\centering
\caption{标准文档类中的字号大小。}\label{tbl:ptsizes}
\begin{tabular}{lrrr}
\hline
字号 & 10pt 选项（默认）& 11pt 选项 & 12pt 选项 \\
\cmd{tiny}       & 5pt  & 6pt & 6pt\\
\cmd{scriptsize} & 7pt  & 8pt & 8pt\\
\cmd{footnotesize} & 8pt & 9pt & 10pt \\
\cmd{small}        & 9pt & 10pt & 10.95pt \\
\cmd{normalsize} & 10pt & 10.95pt & 12pt \\
\cmd{large}      & 12pt & 12pt & 14.4pt \\
\cmd{Large}      & 14.4pt & 14.4pt & 17.28pt \\
\cmd{LARGE}      & 17.28pt & 17.28pt & 20.74pt\\
\cmd{huge}       & 20.74pt & 20.74pt & 24.88pt\\
\cmd{Huge}       & 24.88pt & 24.88pt & 24.88pt\\
\hline
\end{tabular}
\end{table}

使用字号命令的时候，通常也需要用花括号进行分组，如同 \cmd{rmfamily} 那样。
\begin{example}
He likes {\LARGE large and
{\small small} letters}.
\end{example}

\LaTeX\ 还提供了一个基础的命令 \cmd{fontsize} 用于设定任意大小的字号：
\begin{command}
\cmd{fontsize}\marg{size}\marg{base line-skip}
\end{command}

\cmd{fontsize} 用到两个参数，\Arg{size} 为字号，\Arg{base line-skip} 为基础行距。
表 \ref{tbl:ptsizes} 中的命令也都各自设定了与字号对应的基础行距，大小为字号的 1.2 倍。
如果不是在导言区，\cmd{fontsize} 的设定需要 \cmd{selectfont} 命令才能立即生效，
而表 \ref{tbl:sizes} 的字号设定都是立即生效的。

任意设置字号有个问题：\LaTeX\ 排版用到的一些老式字体是固定字号的%
\footnote{不难看出表 \ref{tbl:ptsizes} 中的许多字号大致呈等比数列，比例为 1.2；而10.95pt实际上是$10\times\sqrt{1.2}$。}，
它们往往无法自动调整成任意的字号大小。如果可能的话，应当尽量使用表 \ref{tbl:sizes} 中的命令设置字号。

\subsection{选用字体宏包}\label{subsec:font-pkgs}

尽管到了这里你知道了如何切换粗体、斜体等等，以及如何改变字号，
但你依然用着 \LaTeX\ 默认的那套、由 \TeX\ 程序的开发者高德纳亲自制作的 Computer Modern 字体。
有的人可能很喜欢 Times 或者 Palatino，或者更好看的字体。这些字体样式的自由设置在 \LaTeX\ 里还不太容易。

幸好大部分时候，许多字体宏包为我们完成了整套配置，我们可以在调用宏包之后，照常使用 \cmd{bfseries} 或 \cmd{ttfamily} 等我们熟悉的命令。
表 \ref{tbl:font-pkgs} 列出了较为常用的字体宏包，其中相当多的字体包还配置了数学字体，或者文本、数学字体兼而有之。
更多的的字体配置参考 \cite{survey,fontcatalogue}。

\begin{table}[!p]
\centering
\caption{常见的 \LaTeX\ 字体宏包。}\label{tbl:font-pkgs}
\begin{minipage}{\linewidth}
\begin{tabular*}{\linewidth}{@{\extracolsep{0pt plus 1fill}}cp{0.65\linewidth}@{}}
 \hline
 \pai{lmodern}     & Latin Modern 字体，对 Computer Modern 字体的扩展  \\
 \pai{txfonts}     & Times 风格的字体宏包  \\
 \pai{pxfonts}     & Palation 风格的字体宏包  \\
 \pai{newtxtext},\pai{newtxmath}  & \pkg{txfonts} 的改进版本，分别设置文本和数学字体  \\
 \pai{newpxtext},\pai{newpxmath}  & \pkg{pxfonts} 的改进版本，分别设置文本和数学字体  \\
 \pai{mathptmx}    & \pkg{psnfss} 组件之一，Times 风格，较为陈旧，不推荐使用  \\
 \pai{mathpazo}    & \pkg{psnfss} 组件之一，Palatino 风格，较为陈旧，不推荐使用  \\
 \pai{ccfonts}     & Concrete 风格字体 \\
 \pai{euler}       & Euler 风格数学字体，也出自于高德纳之手 \\
 \pai{fourier}     & fourier 风格数学字体 \\
 \pai{arev}        & Arev 风格的无衬线字体 \\
 \pai{cmbright}    & 仿 Computer Modern 风格的无衬线字体 \\
 \pai{libertine}   & Linux Libertine 衬线字体 \\
 \pai{droid}       & Droid Serif/Droid Sans 等 \\
 \pai{inconsolata} & Inconsolata 一款不错的开源等宽字体 \\
 \pai{sourcesanspro} & Source Sans Pro 开源无衬线字体 \\
 \pai{sourcecodepro} & Source Code Pro 开源等宽字体 \\
 \pai{mathabx}     & 数学符号宏包之一 \\
 \pai{MnSymbol}    & 数学符号宏包之一 \\
 \pai{fdsymbol}    & 数学符号宏包之一 \\
 \pai{mathdesign}  & 配合 Charter/Garamond/Utopia 正文字体的数学字体宏包（Garamond 字体可能需要单独安装） \\
 \hline
\end{tabular*}
\end{minipage}
\end{table}

\subsection{\texttt{xelatex} 命令下使用 \pkg{fontspec} 宏包更改字体}\label{subsec:fontspec}
\paih{fontspec}

\texttt{xelatex} 编译命令能够支持直接调用系统安装的 \texttt{.ttf} 或 \texttt{.otf} 格式字体%
\footnote{Linux 下的 \TeX\ Live 为了支持系统安装的字体，需要额外的配置。详见附录 \ref{app:install}。}。相比于上一小节，我们有了更多修改字体的余地。

\texttt{xelatex} 命令下支持用户调用字体的宏包是 \pkg{fontspec}。宏包提供了几个设置全局字体的命令，设置 \cmd{rmfamily} 等对应命令的默认字体%
\footnote{新版本 \pkg{fontspec} 的命令支持把必选参数 \Arg{font name} 放在可选参数 \Arg{font features} 的前面。}：
\begin{command}
\cmd{setmainfont}\oarg{font features}\marg{font name} \\
\cmd{setsansfont}\oarg{font features}\marg{font name} \\
\cmd{setmonofont}\oarg{font features}\marg{font name}
\end{command}
\cih{setmainfont}
\cih{setsansfont}
\cih{setmonofont}
其中 \Arg{font name} 使用字体的文件名（带扩展名）或者字体的英文名称。\Arg{font features} 用来手动配置对应的粗体或斜体
（如果有配套的粗体和斜体，则自动设置），如 \texttt{Bold\-Font=\Arg{font name},Italic\-Font=\Arg{font name}}。
\Arg{font features} 还能配置字体本身的各种特性，这里不再赘述，感兴趣的读者请参考 \pkg{fontspec} 宏包的帮助文档。

需要注意一点：\pkg{fontspec} 宏包会覆盖数学字体设置。需要使用 \ref{tbl:font-pkgs} 中列出的一些数学字体宏包时，
应当在调用 \pkg{fontspec} 宏包时加上 \texttt{no-math} 选项。\pkg{fontspec} 宏包可能由其它宏包（比如 \pkg{xeCJK}）加载时，
则在文档类一开头的 \cmd{document\-class} 里加上 \texttt{no-math} 选项。

\subsection{使用 \pkg{xeCJK} 宏包更改中文字体}\label{subsec:CJKfont}
\paih{xeCJK}

前文已经介绍过的 \pkg{xeCJK} 宏包使用了和 \pkg{fontspec} 宏包非常类似的语法设置中文字体：
\begin{command}
\cmd{setCJKmainfont}\oarg{font features}\marg{font name} \\
\cmd{setCJKsansfont}\oarg{font features}\marg{font name} \\
\cmd{setCJKmonofont}\oarg{font features}\marg{font name}
\end{command}
\cih{setCJKmainfont}
\cih{setCJKsansfont}
\cih{setCJKmonofont}

由于中文字体少有对应的粗体或斜体，\Arg{font features} 里多用其他字体来配置，
比如许多人习惯将宋体的 \texttt{BoldFont} 配置为黑体，而 \texttt{ItalicFont} 配置为楷体。

\section{段落格式和间距}\label{sec:par-lengths}

\subsection{长度变量}\label{subsec:lengths}

我们在本章第一次接触长度变量。长度变量的定义方式如下：
\begin{command}
\cmd{newlength}\marg*{\cmd{\Arg{length command}}}
\end{command}

长度变量可以用 \cmd{setlength} 赋值，或用 \cmd{addtolength} 增加长度：
\begin{command}
\cmd{setlength}\marg*{\cmd{\Arg{length command}}}\marg{length} \\
\cmd{addtolength}\marg*{\cmd{\Arg{length command}}}\marg{length}
\end{command}

长度的数值 \Arg{length} 由数字和单位组成。常用的单位如下：

\begin{center}
\begin{tabular}{cp{140pt}}
 \hline
 \texttt{pt} & 点阵宽度，1/72.27\texttt{in} \\
 \texttt{in} & 英寸 \\
 \texttt{cm} & 厘米 \\
 \texttt{mm} & 毫米 \\
 \hline
 \texttt{em} & 当前字号下大写字母 M 的宽度，常用于水平距离的设定 \\
 \texttt{ex} & 当前字号下小写字母 x 的高度，常用于垂直距离的设定 \\
 \hline
\end{tabular}
\end{center}

另外长度还可以表达成可伸缩的“弹性长度”，如 \texttt{12pt plus 2pt minus 3pt} 
表示基础长度为 \texttt{12pt}，可以伸展到 \texttt{14pt} 也可以收缩到 \texttt{9pt}。
也可只定义 \texttt{plus} 或者 \texttt{minus} 的部分，如 \texttt{0pt plus 5pt}。

长度的数值还可以用长度变量的倍数来表达，如 \texttt{2.5}\cmd{parindent} 等。

\subsection{行距}\label{subsec:linespread}

前文中我们提到过 \cmd{fontsize} 命令可以修改行距，但我们很少直接用这个命令，常用的是 \cmd{linespread}命令，
它通常放在导言区：
\begin{command}
\cmd{linespread}\marg{factor}
\end{command}
\cih{linespread}

\cmd{linespread} 命令的参数 \Arg{factor} 还并不是最终的行距。前文所叙述的 \cmd{fontsize} 命令设置了一个基本行距。
\cmd{small}、\cmd{large} 等命令也设置了 1.2 倍的基本行距。
而 \cmd{linespread} 相当于在 1.2 倍的基础上乘以 \Arg{factor}。
所以要想设定 1.5 倍行距的话，应当设 \cmd{linespread}\marg*{1.25} 。

若是想要局部地改变某个段落的行距，需要用到前文所叙述的 \cmd{selectfont} 命令使改动立即生效：
\begin{example}
{\linespread{1.67}\selectfont
This paragraph is typeset with
the baseline skip set to 2.0 times
the font size. Note the par
command at the end of the
paragraph.\par}

This paragraph has a clear
purpose, it shows that after the
curly brace has been closed,
everything is back to normal.
\end{example}

字号的改变是即时生效的，而行距的改变直到文字\textbf{分段}时才生效。
如果你想改变某一部分文字的行距，那么不能简单地将文字包含在花括号内。注意下面两个例子中\ci{par} 命令的位置%
\footnote{\cmd{par} 的作用相当于一个空行。}。
\begin{example}
{\Large Don't read this!
 It is not true.
 You can believe me!\par}
\end{example}

\begin{example}
{\Large This is not true either.
But remember I am a liar.}\par
\end{example}

\subsection{段落格式}\label{subsec:par-shape}

以下长度分别为段落的左缩进、右缩进和首行缩进：
\begin{command}
\cmd{setlength}\marg*{\cmd{leftskip}}\marg*{20pt}  \\
\cmd{setlength}\marg*{\cmd{rightskip}}\marg*{20pt} \\
\cmd{setlength}\marg*{\cmd{parindent}}\marg*{2em}
\end{command}

它们和设置字号的命令一样，在分段时生效。

\LaTeX\ 默认在段落开始时缩进，长度为你用上述命令设置的 \cmd{parindent}。如果你在某一段不想使用缩进，可使用某一段开头使用
\begin{command}
\cmd{noindent}
\end{command}
命令。相反地，
\begin{command}
\cmd{indent}
\end{command}
命令强制开启一段首行缩进的段落。

\LaTeX\ 还默认\textbf{在 \cmd{chapter}、\cmd{section} 等章节命令之后的第一段不缩进}%
\footnote{\pkg{ctex} 宏包按照中文习惯保持第一段的首行缩进。}。
如果你想使之缩进，当然可以使用 \cmd{indent} 逐个调整段落，但更简单的方式是在导言区使用 \pai{indentfirst} 宏包：
\begin{verbatim}
\usepackage{indentfirst}
\end{verbatim}

段与段之间的垂直间距为 \cmd{parskip}，如设置段落间距为弹性长度，可在 \texttt{0.8ex} 到 \texttt{1.5ex} 变动：
\begin{command}
\cmd{setlength}\marg*{\cmd{parskip}}\marg*{1ex plus 0.5ex minus 0.2ex}
\end{command}

\subsection{水平间距}\label{subsec:hspace}

\LaTeX 默认为单词之间增添了水平间距。我们可以用已经在数学公式中出现的 \cmd{quad} 和 \cmd{qquad} 命令制造一个额外的间距。
但是如果想要得到任意长度的间距，需要用到如下命令：
\begin{command}
\cmd{hspace}\marg{length}
\end{command}
\cih{hspace}

\cmd{hspace} 命令生成的间距如果位于一行的开头或末尾，则有可能被“吞掉”。这时可以使用 \cmd{hspace*} 代替 \cmd{hspace} 命令
得到不会因断行而消失的水平间距。

\begin{example}
This\hspace{1.5cm}is a space
of 1.5 cm.
\end{example}

命令 \cmd{stretch} 生成一个特殊弹性长度，参数为权重。它的基础长度为零，但可以一直延伸，直到一行内可用的空间都被填满。如果同一行内出现多个 
\cmd{stretch}\marg{n}，这一行的所有可用空间将以每个 \cmd{stretch} 设置的权重 \Arg{n} 进行分配。

\begin{example}
x\hspace{\stretch{1}}
x\hspace{\stretch{3}}x
\end{example}

在正文中用 \cmd{hspace} 调节水平间距时，往往使用 \texttt{em} 作为单位，它会随字号大小而变：

\begin{example}
{\Large{}big\hspace{1em}y}\\
{\tiny{}tin\hspace{1em}y}
\end{example}

\subsection{垂直间距}\label{subsec:vspace}

在页面中，段落、章节标题、行间公式、列表、浮动体等元素之间的间距是 \LaTeX\ 预设的。比如 \cmd{parskip} ，默认设置为 \texttt{0pt plus 1pt}。

如果我们想要人为地增加段落之间的垂直间距，可以在\textbf{两个段落之间}的位置使用如下命令：
\begin{command}
\cmd{vspace}\marg{length}
\end{command}
\cih{vspace}

\cmd{vspace} 的间距在一页的顶端或底端可能被“吞掉”，类似 \cmd{hspace} 在一行的开头和末尾那样。
对应地，\cmd{vspace*} 命令产生不会因断页而消失的垂直间距。\cmd{vspace} 也可用 \cmd{stretch} 设置无限延伸的垂直长度。

在段落内部的某两行之间增加垂直间距，一般通过给 \cmd{\char`\\} 命令加上可选参数，和表格的用法相同：
\begin{command}
\cmd{\char`\\}\oarg{length}
\end{command}

另外 \LaTeX\ 还提供了\cmd{bigskip}, \cmd{medskip}, \cmd{smallskip} 来增加预定义长度的垂直间距。

\section{页面和分栏}\label{sec:page-columns}

我们不妨回顾一下最开头的文档类属性。\LaTeX\ 允许你通过文档类选项控制纸张的大小，包括 \texttt{a4paper}、\texttt{letterpaper}
等等，并配合字号设置了适合的页边距。这些页面参数由图 \ref{fig:layouts} 里给出的各种长度变量控制，
可以用 \cmd{setlength} 命令修改这些长度变量，以达到调节页面尺寸和边距的作用。

\begin{figure}[!p]
\currentpage
\oddpagelayouttrue
\pagediagram
\caption{控制页面的各种参数示意图} \label{fig:layouts}
\end{figure}

但是，如果你想要直接设置页边距等参数，着实是一件麻烦事。我们根据图 \ref{fig:layouts} 将各个方向的页边距计算公式给出（以奇数页为例）：
\begin{align*}
\langle\text{\itshape left-margin}\rangle   &= \text{\ttfamily 1in} 
                                             + \text{\cmd{hoffset}}
                                             + \text{\cmd{oddsidemargin}} \\
\langle\text{\itshape right-margin}\rangle  &= \text{\cmd{paperwidth}} 
                                             - \langle\text{\itshape left-margin}\rangle
                                             - \text{\cmd{textwidth}} \\
\langle\text{\itshape top-margin}\rangle    &= \text{\ttfamily 1in} 
                                             + \text{\cmd{voffset}}
                                             + \text{\cmd{topmargin}}
                                             + \text{\cmd{headheight}}
                                             + \text{\cmd{headsep}} \\
\langle\text{\itshape bottom-margin}\rangle &= \text{\cmd{paperheight}}
                                             - \langle\text{\itshape top-margin}\rangle
                                             - \text{\cmd{textheight}}
\end{align*}
如果我们想设置合适的 \Arg{left-margin} 和 \Arg{right-margin}，就要靠上述方程组把 \cmd{oddsidemargin} 和 \cmd{textwidth} 等参数解出来！

幸好 \pkg{geometry} 宏包能够帮我们完成背后繁杂的计算，让我们能够用简便一些的方法设置页面参数。

\subsection{利用 \pkg{geometry} 宏包设置页面参数}\label{subsec:geometry}

你既可以调用 \pkg{geometry} 宏包然后用其提供的 \cmd{geometry} 命令设置页面参数：
\begin{command}
\cmd{usepackage}\marg*{geometry} \\
\cmd{geometry}\marg{geometry-settings}
\end{command}
也可以将参数作为宏包的选项使用：
\begin{command}
\cmd{usepackage}\oarg{geometry-settings}\marg*{geometry}
\end{command}

其中 \Arg{geometry-settings} 多以 \Arg{key}=\Arg{value} 的形式组织。

比如，符合 Microsoft Word 习惯的页面设定是 A4 纸张，上下边距 1 英寸，左右边距 1.25 英寸，于是我们可以通过如下两种等效的方式之一设定页边距：
\begin{verbatim}
\usepackage[left=1.25in,right=1.25in,%
  top=1in,bottom=1in]{geometry}
% or like this:
\usepackage[hmargin=1.25in,vmargin=1in]{geometry}
\end{verbatim}

又比如，需要设定周围的边距一致为1.25英寸，可以用更简单的语法：
\begin{verbatim}
\usepackage[margin=1.25in]{geometry}
\end{verbatim}

对于书籍等双面文档，习惯上奇数页右边、偶数页左边留出较多的页边距，而书脊一侧的奇数页左边、偶数页右边页边距较少。我们可以这样设定：
\begin{verbatim}
\usepackage[inner=1in,outer=1.25in]{geometry}
\end{verbatim}

\pkg{geometry} 宏包本身也能够修改纸张大小、页眉页脚高度、边注宽度等等参数。更详细的用法不再赘述，
感兴趣的用户可查阅 \pkg{geometry} 宏包的帮助文档。

\subsection{页面内容的垂直对齐}\label{subsec:raggedbottom}

\LaTeX\ 默认将页面内容在垂直方向分散对齐。对于有大量图表的文档，许多时候想要做到排版匀称的页面很困难，
垂直对齐会造成某些页面的垂直间距过宽。

\LaTeX\ 还提供了另一种策略，即将页面内容向顶部对齐，给底部留出高度不一的空白。在导言区或者适合的位置使用
以下命令开启顶部对齐的效果：
\begin{command}
\cmd{raggedbottom}
\end{command}

相反地，\cmd{flushbottom} 命令用于设置页面分散对齐。

\subsection{分栏}\label{subsec:columns}

\LaTeX\ 支持简单的单栏或双栏排版。标准文档类的全局选项 \texttt{onecolumn}、\texttt{twocolumn} 
可控制全文分单栏或双栏排版。\LaTeX\ 也提供了切换单/双栏排版的命令：
\begin{command}
\cmd{onecolumn} \\
\cmd{twocolumn} \\
\cmd{twocolumn}\oarg{one-column top material}
\end{command}

以上命令总是会另起一页（\cmd{clearpage}）。\cmd{twocolumn} 支持带一个可选参数，用于排版双栏之上的一部分单栏内容。
在双栏模式下使用 \cmd{newpage} 会换栏而不是直接换页；\cmd{clearpage} 则能够换页。

一个比较好用的分栏解决方案是 \pkg{multicol}，它提供了简单的 \env{multicols} 环境自动产生分栏，如以下环境将内容分为 3 栏：
\begin{verbatim}
\begin{multicols}{3}
...
\end{multicols}
\end{verbatim}

\env{multicol} 宏包能够在一页之中切换单栏/多栏，也能处理跨页的分栏，且各栏的高度分度平衡。但代价是%
\textbf{在 \env{multicols} 环境中无法正常使用 \env{table} 和 \env{figure} 等浮动体环境}，它会直接让浮动体丢失。
浮动体只能用跨栏的 \env{table*} 和 \env{figure*} ，或者用 \pkg{float} 宏包提供的 H 选项固定浮动体的位置。

\pkg{multicol} 宏包不能直接套用于目录，直接在 \env{multicols} 环境里套用 \cmd{table\-of\-contents} 等命令多半会出错。
解决的方案是直接调用 \pkg{multitoc} 宏包，它能够正确地将目录分栏（默认双栏）。

\section{页眉页脚}\label{sec:pagestyle}

\subsection{基本的页眉页脚样式}\label{subsec:basic-pagesyle}

\LaTeX\ 中提供了命令 \cmd{pagestyle} 来修改页眉页脚的样式：
\begin{command}
\cmd{pagestyle}\marg{page-style}
\end{command}
另外一个命令只影响当页的页眉页脚样式：
\begin{command}
\cmd{thispagestyle}\marg{page-style}
\end{command}

\Arg{page-style} 参数为样式的名称，在 \LaTeX\ 里预定义了四类样式，见表\ref{tbl:pagestyle}。

\begin{table}[htbp]
\centering
\caption{\LaTeX\ 预定义的页眉页脚样式}\label{tbl:pagestyle}
\begin{tabular}{cp{20em}}
 \hline
 \texttt{empty}  & 页眉页脚为空 \\
 \texttt{plain}  & 页眉为空，页脚为页码。（article 和 report 文档类默认；book 文档类的每章第一页也为 plain 格式） \\
 \hline
 \texttt{headings}  & 页眉为章节标题和页码，页脚为空。（book 文档类默认） \\
 \texttt{myheadings}  & 页眉为页码及 \cmd{markboth} 和 \cmd{markright}命令手动指定的内容，页脚为空。\\
 \hline
\end{tabular}
\end{table}

其中 \texttt{headings} 的情况较为复杂：
\begin{itemize}
  \item twoside 选项的 article 文档类，偶数页页眉为页码和节标题，奇数页页眉为小节标题和页码；
  \item twoside 选项的 book/report 文档类，偶数页页眉为页码和章标题，奇数页页眉为节标题和页码；
  \item oneside 选项的 article 文档类，页眉为节标题和页码；
  \item oneside 选项的 book/report 文档类，页眉为章标题和页码。
\end{itemize}

\subsection{手动更改页眉页脚的内容}\label{subsec:marks}

对于 headings 或者 myheadings 样式，\LaTeX\ 允许用户使用命令手动修改页眉上面的内容，
特别是因为使用了 \cmd{chapter*} 等命令而无法自动生成页眉页脚的情况：
\begin{command}
\cmd{markright}\marg{right-mark}\\
\cmd{markboth}\marg{left-mark}\marg{right-mark}
\end{command}

其中 \Arg{left-mark} 和 \Arg{right-mark} 的内容分别预期出现在左页（偶数页）和右页（奇数页）。

事实上 \cmd{chapter}、\cmd{section} 等命令内部也使用 \cmd{mark\-both} 或者 \cmd{mark\-right} 写页眉。
\LaTeX\ 默认在写页眉的时候强制将英文字母变为大写。如果你不喜欢这样，可以尝试以的代码
（相关命令的用法参照 \ref{sec:newcommands} 节）%
\footnote{但是这不能改变页眉页脚的斜体样式，斜体是定义在 headings 样式里的。
如果不喜欢斜体，办法之一是在 \cmd{markboth} 等命令的参数里加上 \cmd{normalfont} 以及想要的字体样式命令，
或直接尝试使用接下来介绍的 \pkg{fancyhdr} 宏包。}：
\begin{verbatim}
\renewcommand\chaptermark[1]{%
  \markboth{Chapter \thechapter\quad #1}{}}
\renewcommand\sectionmark[1]{%
  \markright{\thesection\quad #1}}
\end{verbatim}

其中 \cmd{thechapter}、\cmd{thesection} 等命令为章节计数器的数值，详见 \ref{sec:counters} 节。
以上代码适用于 report/book 文档类。对于article 文档类，与两个页眉相关的命令分别为 \cmd{sec\-tion\-mark} 和 \cmd{sub\-sec\-tion\-mark} 。

\subsection{\pkg{fancyhdr} 宏包}\label{subsec:fancyhdr}

\pai{fancyhdr} 宏包改善了页眉页脚样式的定义方式，允许我们将内容自由安置在页眉和页脚的左、中、右三个位置，还为页眉和页脚各加了一条横线。

\pkg{fancyhdr} 自定义了样式名称 fancy。使用 \pkg{fancyhdr} 宏包定义页眉页脚之前，通常先用 \cmd{pagestyle}\marg*{fancy} 调用这个样式。
在 \pkg{fancyhdr} 中定义页眉页脚的命令为：
\begin{command}
\cmd{fancyhead}\oarg{position}\marg*{...}\\
\cmd{fancyfoot}\oarg{position}\marg*{...}
\end{command}
其中 \Arg{position} 为 L（左）/C（中）/R（右） 以及与 O（奇数页）/E（偶数页）字母的组合。

我们用一个示例说明 \pkg{fancyhdr} 的用法，这段代码可以用于导言区，它的效果是将章节标题放在和 headings 一致的位置，但使用加粗格式；
页码都放在页脚正中；并修改 fancy 格式引入的横线宽度，“去掉”页脚的横线。更多的用法请读者参考 \pkg{fancyhdr} 宏包的帮助文档。

\begin{sourcecode}[hbp]
\begin{Verbatim}
\usepackage{fancyhdr}
\pagestyle{fancy}
\renewcommand{\chaptermark}[1]{%
        \markboth{#1}{}}
\renewcommand{\sectionmark}[1]{%
        \markright{\thesection\ #1}}
% delete current header and footer
\fancyhf{}
% set our header and footer
\fancyfoot[C]{\bfseries\thepage}
\fancyhead[LO]{\bfseries\rightmark}
\fancyhead[RE]{\bfseries\leftmark}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0pt} % remove footnote line
\end{Verbatim}
\caption{\pkg{fancyhdr} 宏包的使用方法示例。}
\end{sourcecode}

\endinput